import telebot
import time
import os
import random
import requests
from bs4 import BeautifulSoup

from dotenv import load_dotenv
from tinydb import TinyDB, Query
from anekdots import anekdots

load_dotenv()
token = os.getenv('BOT_TOKEN')
admin_channel_id = os.getenv('CHANNEL_ID')

bot = telebot.TeleBot(token)

db = TinyDB('ebenevo.json')
User = Query()

# –°–ª–æ–≤–∞—Ä—å –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –∏ –æ—Ç–≤–µ—Ç–æ–≤
keywords = {
    "–¥–∞": "–ø–∏–∑–¥–∞",
    "–Ω–µ—Ç": "–ø–∏–¥–æ—Ä–∞ –æ—Ç–≤–µ—Ç",
    "–º–æ–ª–æ–¥–µ—Ü": "—Å–æ—Å–∏ –∫–æ–Ω–µ—Ü"
}

whitelist = {
    -1002482107448,
    -1002434589436,
    -1002173225368
}

def is_admin(message):
        chat_id = message.chat.id
        user_id = message.from_user.id
        user_status = bot.get_chat_member(chat_id, user_id).status
        if user_status == 'administrator' or user_status == 'creator':
            return True
        else:
            return False

def get_random_anekdot():
   headers = {
       'user-agent' : 'Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/98.0.4758.109 Safari/537.36 OPR/84.0.4316.52'
   }

   url = 'https://www.anekdot.ru/random/anekdot/'
   r = requests.get(url=url, headers=headers)

   soup = BeautifulSoup(r.text, 'html.parser')

   anekdot = soup.find_all('div', class_="text")[0]

   for br in anekdot.find_all('br'):
    br.replace_with('\n')

   return anekdot

@bot.message_handler(commands=["start"])
def start(message):
    bot.reply_to(message, "–ü—Ä–∏–≤–µ—Ç! –Ø –±–æ—Ç –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è —á–∞—Ç–æ–º. –ù–∞–ø–∏—à–∏ /help, —á—Ç–æ–±—ã —É–∑–Ω–∞—Ç—å, —á—Ç–æ —è —É–º–µ—é.")

@bot.message_handler(commands=['help'])
def help(message):
    bot.reply_to(message, "/kick - –∫–∏–∫–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n/mute - –∑–∞–º—É—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –Ω–∞ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è\n/unmute - —Ä–∞–∑–º—É—Ç–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è\n/warn - –≤—ã–¥–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ")

@bot.message_handler(commands=['kick'])
def kick_user(message):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º    
    if not is_admin(message):
        bot.reply_to(message, "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.")
        return
    
    if message.reply_to_message:
        # –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–ø–ª–∞–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
        user_id = message.reply_to_message.from_user.id
        username = message.reply_to_message.from_user.username

        try:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–æ–º
            user_info = bot.get_chat_member(message.chat.id, user_id)
            if user_info.user.is_bot:
                bot.reply_to(message, "–ù–µ–ª—å–∑—è –∫–∏–∫–Ω—É—Ç—å –¥—Ä—É–≥–æ–≥–æ –±–æ—Ç–∞.")
                return
            
            # –ö–∏–∫–∞–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            bot.kick_chat_member(message.chat.id, user_id)
            
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–∏–∫–æ–º –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
            with open('./images/kick.jpg', 'rb') as photo:
                bot.send_photo(message.chat.id, photo=photo, caption=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @{username} –±—ã–ª –∫–∏–∫–Ω—É—Ç.")

                  #—à–ª–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π –∫–∞–Ω–∞–ª  
            bot.send_message(admin_channel_id, f"üî¥ #–ö–ò–ö\n"
                                                f"‚Ä¢ –ö—Ç–æ: {message.reply_to_message.from_user.full_name} [{message.reply_to_message.from_user.id}]\n"
                                                f"‚Ä¢ –ì—Ä—É–ø–ø–∞: {message.chat.title} [{message.chat.id}]\n")

        except Exception as e:
            bot.reply_to(message, f"–ù–µ —É–¥–∞–ª–æ—Å—å –∫–∏–∫–Ω—É—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
    else:
        bot.reply_to(message, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–≥–æ —Ö–æ—Ç–∏—Ç–µ –∫–∏–∫–Ω—É—Ç—å.")

@bot.message_handler(commands=['ban'])
def ban_user(message):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º    
    if not is_admin(message):
        bot.reply_to(message, "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.")
        return
    
    if message.reply_to_message:
        # –ï—Å–ª–∏ –∫–æ–º–∞–Ω–¥–∞ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –≤ —Ä–µ–ø–ª–∞–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ
        user_id = message.reply_to_message.from_user.id
        username = message.reply_to_message.from_user.username

        try:
            # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –±–æ—Ç–æ–º
            user_info = bot.get_chat_member(message.chat.id, user_id)
            if user_info.user.is_bot:
                bot.reply_to(message, "–ù–µ–ª—å–∑—è –±–∞–Ω–∏—Ç—å –¥—Ä—É–≥–æ–≥–æ –±–æ—Ç–∞.")
                return
            
            # –ë–∞–Ω–∏–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            res = bot.ban_chat_member(message.chat.id, user_id)
            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–∏–∫–æ–º –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
            with open('./images/ban.jpg', 'rb') as photo:
                bot.send_photo(message.chat.id, photo=photo, caption=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @{username} –±—ã–ª –∑–∞–±–∞–Ω–µ–Ω.")

            #—à–ª–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π –∫–∞–Ω–∞–ª
            bot.send_message(admin_channel_id, f"üî¥ #–ë–ê–ù\n"
                                      f"‚Ä¢ –ö—Ç–æ: {message.reply_to_message.from_user.full_name} [{message.reply_to_message.from_user.id}]\n"
                                      f"‚Ä¢ –ì—Ä—É–ø–ø–∞: {message.chat.title} [{message.chat.id}]\n")

        except Exception as e:
            bot.reply_to(message, f"–ù–µ —É–¥–∞–ª–æ—Å—å –∑–∞–±–∞–Ω–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è: {e}")
    else:
        bot.reply_to(message, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–≥–æ —Ö–æ—Ç–∏—Ç–µ –∑–∞–±–∞–Ω–∏—Ç—å.")


@bot.message_handler(commands=['mute'])
def mute_user(message):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º    
    if not is_admin(message):
        bot.reply_to(message, "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.")
        return
    
    if message.reply_to_message:
        chat_id = message.chat.id
        user_id = message.reply_to_message.from_user.id
        duration = 60 # –ó–Ω–∞—á–µ–Ω–∏–µ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é - 1 –º–∏–Ω—É—Ç–∞
        args = message.text.split()[1:]
        if args:
            try:
                duration = int(args[0])
            except ValueError:
                bot.reply_to(message, "–ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –≤—Ä–µ–º–µ–Ω–∏.")
                return
            if duration < 1:
                bot.reply_to(message, "–í—Ä–µ–º—è –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω—ã–º —á–∏—Å–ª–æ–º.")
                return
            if duration > 1440:
                bot.reply_to(message, "–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–æ–µ –≤—Ä–µ–º—è - 1 –¥–µ–Ω—å.")
                return
        bot.restrict_chat_member(chat_id, user_id, until_date=time.time()+duration*60)
        bot.reply_to(message, f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å {message.reply_to_message.from_user.username} –∑–∞–º—É—á–µ–Ω –Ω–∞ {duration} –º–∏–Ω—É—Ç.")
    else:
        bot.reply_to(message, "–≠—Ç–∞ –∫–æ–º–∞–Ω–¥–∞ –¥–æ–ª–∂–Ω–∞ –±—ã—Ç—å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∞ –≤ –æ—Ç–≤–µ—Ç –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–≥–æ –≤—ã —Ö–æ—Ç–∏—Ç–µ –∑–∞–º—É—Ç–∏—Ç—å.")

@bot.message_handler(commands=['warn'])
def warn_user(message):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –∞–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä–æ–º    
    if not is_admin(message):
        bot.reply_to(message, "–£ –≤–∞—Å –Ω–µ—Ç –ø—Ä–∞–≤ –¥–ª—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è —ç—Ç–æ–π –∫–æ–º–∞–Ω–¥—ã.")
        return
    
    if message.reply_to_message:
            user_id = message.reply_to_message.from_user.id
            username = message.reply_to_message.from_user.username
            user_data = db.get(User.id == user_id)
            if user_data:
                warnings_count = user_data['warnings'] + 1
                db.update({'warnings': warnings_count}, User.id == user_id)        
            else:
                db.insert({'id': user_id, 'warnings': 1})
                warnings_count = 1

            if warnings_count >= 3:
                bot.ban_chat_member(message.chat.id, user_id)
                            # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–∏–∫–æ–º –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
                with open('./images/ban.jpg', 'rb') as photo:
                    bot.send_photo(message.chat.id, photo=photo, caption=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @{username} –±—ã–ª –∫–∏–∫–Ω—É—Ç –∑–∞ –ø—Ä–µ–≤—ã—à–µ–Ω–∏–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π.")
                db.remove(User.id == user_id)
            else:
                with open('./images/warn.jpg', 'rb') as photo:
                    bot.send_photo(message.chat.id, photo=photo, caption=f"–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å @{username} –ø–æ–ª—É—á–∏–ª –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ. –í—Å–µ–≥–æ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π: {warnings_count}/3")

                #—à–ª–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π –∫–∞–Ω–∞–ª
                bot.send_message(admin_channel_id, f"‚ö†Ô∏è #–ü–†–ï–î–£–ü–†–ï–ñ–î–ï–ù–ò–ï\n"
                                      f"‚Ä¢ –ö—Ç–æ: {message.reply_to_message.from_user.full_name} [{message.reply_to_message.from_user.id}]\n"
                                      f"‚Ä¢ –ì—Ä—É–ø–ø–∞: {message.chat.title} [{message.chat.id}]\n")
    else:
        bot.reply_to(message, "–ü–æ–∂–∞–ª—É–π—Å—Ç–∞, –æ—Ç–≤–µ—Ç—å—Ç–µ –Ω–∞ —Å–æ–æ–±—â–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è, –∫–æ—Ç–æ—Ä–æ–º—É —Ö–æ—Ç–∏—Ç–µ –≤—ã–¥–∞—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ.")

@bot.message_handler(commands=['anekdot'])
def say_anekdot(message):
    print(message.chat.id)
    # –í—ã–±–æ—Ä —Å–ª—É—á–∞–π–Ω–æ–≥–æ –∞–Ω–µ–∫–¥–æ—Ç–∞
    random_anekdot = random.choice(anekdots)
    bot.reply_to(message, random_anekdot)

@bot.message_handler(commands=['anekdot-r'])
def say_anekdot(message):
    anekdot = get_random_anekdot()
    bot.reply_to(message, anekdot)


@bot.message_handler(content_types=['new_chat_members'])
def welcome_new_member(message):
    for new_member in message.new_chat_members:
        # –ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É–µ–º –Ω–æ–≤–æ–≥–æ —É—á–∞—Å—Ç–Ω–∏–∫–∞
        # –û—Ç–ø—Ä–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ —Å –Ω–∏–∫–æ–º –∏ –ª–æ–∫–∞–ª—å–Ω—ã–º –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–µ–º
        with open('./images/welcome.jpg', 'rb') as photo:
            bot.send_photo(message.chat.id, photo=photo, caption=f"–ü—Ä–∏–≤–µ—Ç—Å—Ç–≤—É—é, {new_member.first_name}!\n–ú—ã —Ä–∞–¥—ã –≤–∏–¥–µ—Ç—å —Ç–µ–±—è –≤ –Ω–∞—à–µ–º —á–∞—Ç–µ üçÄ\n\n–†–∞—Å—Å–∫–∞–∂–∏ –Ω–∞–º –Ω–µ–º–Ω–æ–≥–æ –æ —Å–µ–±–µ:\n–ö–∞–∫ —Ç–µ–±—è –º–æ–∂–Ω–æ –∑–≤–∞—Ç—å?\n–°–∫–æ–ª—å–∫–æ —Ç–µ–±–µ –ª–µ—Ç?\n–ö–µ–º —Ä–∞–±–æ—Ç–∞–µ—à—å –∏ —á–µ–º –ª—é–±–∏—à—å —É–≤–ª–µ–∫–∞—Ç—å—Å—è?\n\n–¢–∞–∫ –º—ã —Å–º–æ–∂–µ–º –ø–æ–º–æ—á—å —Ç–µ–±–µ –±—ã—Å—Ç—Ä–µ–µ –∞–¥–∞–ø—Ç–∏—Ä–æ–≤–∞—Ç—å—Å—è üêô")
    
    #—à–ª–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π –∫–∞–Ω–∞–ª
    bot.send_message(admin_channel_id, f"‚ûï #–ù–û–í–´–ô_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨\n"
                                      f"‚Ä¢ –ö—Ç–æ: {new_member.full_name} [{new_member.id}]\n"
                                      f"‚Ä¢ –ì—Ä—É–ø–ø–∞: {message.chat.title} [{message.chat.id}]\n")

@bot.message_handler(content_types=['left_chat_member'])
def user_chat_member_update(message):
    left_member = message.left_chat_member
    with open('./images/left.jpg', 'rb') as photo:
        bot.send_photo(message.chat.id, photo=photo, caption=f"–ü—Ä–æ—â–∞–π, {left_member.first_name}! –ú—ã –±—É–¥–µ–º –ø–æ —Ç–µ–±–µ —Å–∫—É—á–∞—Ç—å! üò¢")
    
    #—à–ª–µ–º —Å–æ–æ–±—â–µ–Ω–∏–µ –≤ –∞–¥–º–∏–Ω—Å–∫–∏–π –∫–∞–Ω–∞–ª
    bot.send_message(admin_channel_id, f"‚ûñ #–£–®–ï–î–®–ò–ô_–ü–û–õ–¨–ó–û–í–ê–¢–ï–õ–¨\n"
                                  f"‚Ä¢ –ö—Ç–æ: {message.left_chat_member.full_name} [{message.left_chat_member.id}]\n"
                                  f"‚Ä¢ –ì—Ä—É–ø–ø–∞: {message.chat.title} [{message.chat.id}]\n")



@bot.message_handler(content_types=['chat_member'])
def chat_member_update(message):
    new_member = message.chat_member.new_chat_member
    old_member = message.chat_member.old_chat_member

    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å–ª–∏ —Å—Ç–∞—Ç—É—Å –∏–∑–º–µ–Ω–∏–ª—Å—è
    if new_member.status != old_member.status:
        if new_member.status == 'administrator':
                    bot.send_message(admin_channel_id, f"üü¢ #–ü–û–í–´–®–ï–ù–ò–ï_–†–û–õ–ò\n"
                                                f"‚Ä¢ –ö—Ç–æ: {new_member.user.full_name} [{new_member.user.id}]\n"
                                                f"‚Ä¢ –ù–æ–≤–∞—è —Ä–æ–ª—å: –ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä\n"
                                                f"‚Ä¢ –ì—Ä—É–ø–ø–∞: {message.chat.title} [{message.chat.id}]")
        elif new_member.status == 'left':
            bot.send_message(admin_channel_id, f"üî¥ #–£–î–ê–õ–ï–ù–ò–ï_–†–û–õ–ò\n"
                                        f"‚Ä¢ –ö—Ç–æ: {new_member.user.full_name} [{new_member.user.id}]\n"
                                        f"‚Ä¢ –ì—Ä—É–ø–ø–∞: {message.chat.title} [{message.chat.id}]")


@bot.message_handler(func=lambda message: True)
def respond_to_keywords(message):
    # –ü—Ä–æ–≤–µ—Ä—è–µ–º, —Å–æ–¥–µ—Ä–∂–∏—Ç –ª–∏ —Å–æ–æ–±—â–µ–Ω–∏–µ –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞
    for keyword, response in keywords.items():
        if keyword == message.text.lower():
            if(keyword == "–º–æ–ª–æ–¥–µ—Ü" and message.from_user.id == 80207393):
                bot.reply_to(message, "—Å–ø–∞—Å–∏–±–æ")
            else:
                bot.reply_to(message, response)
            break  # –í—ã—Ö–æ–¥–∏–º –∏–∑ —Ü–∏–∫–ª–∞ –ø–æ—Å–ª–µ –ø–µ—Ä–≤–æ–≥–æ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è

bot.infinity_polling(none_stop=True)
